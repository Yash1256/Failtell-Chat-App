import './chatBox.style.css';
import socketClient from "socket.io-client";
import axios from 'axios'
const SERVER = "http://127.0.0.1:5000";
var socket = socketClient(SERVER);
const test="data:image/jpeg;base64,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";

const onChangeEvent=(event)=>{

}

function scrollBarToBottom() {
    const scrollBar =document.querySelector('.chatHere');
    scrollBar.scrollTop = scrollBar.scrollHeight - scrollBar.clientHeight;
}
const addMessageIntoChatbox = (message,classToBeAdded)=>{
    const newDiv=document.createElement('div');
    newDiv.innerHTML=`<div class="onBothSide ${classToBeAdded}">
                        ${message}
                    </div>`;
    document.querySelector('.chatHere').append(newDiv);
    scrollBarToBottom();
}

const sendMessage = async (event)=>{
     const message = event.target.closest('.rightBlockFooter').querySelector('.chatInput').value;
     var sender = localStorage.getItem("rememberMe")
     var reciever = localStorage.getItem("reciever");
     addMessageIntoChatbox(message,'fromYou')
     document.querySelector('.chatInput').value = "";
    try{
        const response = await axios({
            method : 'POST',
            url : `http://localhost:5000/v1/chat/createChat/${localStorage.getItem("rememberMe")}`,
            data : {
                message,
                sender,
                reciever,
            }
        })
        if(response.status == "200"){
            socket.emit('messageFromClient',{
                message,
            })
        }
    }catch{

    }
    var roomId = localStorage.getItem("roomId");
    socket.emit('messageFromClient',{ message,roomId});
}

socket.on('messageFromServer',serverData=>{
    const roomId = localStorage.getItem("roomId");
    console.log("RoomId");
    if(roomId === serverData.roomId){   
        addMessageIntoChatbox(serverData.message,'fromMyFriends')
    }
});

const sendMessageKey = (event)=>{
    if(event.code === "Enter"){
        document.querySelector('.chatSubmitBtn').click();
    }
    // console.log(event);
}

export const connectRoom = ()=>{
    var roomId = localStorage.getItem("roomId");
    socket.emit("joinToRoom",roomId);
}

export const P2PChatBox = (username)=>{
    // console.log(localStorage.getItem("rememberMe"));
    return (
        <div className="P2PChatBox">
            <div className="rightBlockHeader"> 
                <img className="right-avatar" src={test} alt="" />
                <span className="extraWith"> 
                    <div className="right-username">
                        {localStorage.getItem("rememberMe")}
                    </div>
                </span>
            </div>
            <div className="chatHere">
               
            </div>
            <div className="rightBlockFooter">
                <input onKeyPress={sendMessageKey} onChange={onChangeEvent} className="chatInput" type="text" />
                <input onClick={sendMessage} className="chatSubmitBtn" type="submit" name="" id="" />
            </div>
        </div>
    )
}